<html>
<head>
    <title>跨域测试</title>
    <meta http-equiv="Content-Type" content="text/html"; charset="utf-8">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script>

        function showData (data) {
            console.info("调用showData");

            var result = JSON.stringify(data);
            $("#text").val(result);
        }

        $(document).ready(function () {

           // window.baidu.sug = function  (data) {
           //     console.info("调用showData");

           //     var result = JSON.stringify(data);
           //     $("#text").val(result);
           // }

            $("#btn").click(function () {
             
		var url = $("#url").val(); 
                $.ajax({
                    url: url,
                    type: "GET",
                    dataType: "json",  //指定服务器返回的数据类型
                    //jsonpCallback: "jQuery110207466033502506368_1542899695590",  //指定回调函数名称
                    success: function (data,textStatus) {
                       
			//console.log(data.code)
			//console.log(data.message) 
			console.log(textStatus)
                        $("#text").val(JSON.stringify(data))
                        console.log(data)
			alert('已设置跨域支持，请求成功!')
                    },
		    error: function (XMLHttpRequest, textStatus, errorThrown) {

			if(XMLHttpRequest.status == 0){
				alert('未设置跨域支持，请求失败!')
			}
			console.log(XMLHttpRequest.status);
                        console.log(XMLHttpRequest.readyState);
                        console.log(textStatus);
			console.log(errorThrown);
		    }
                });
            });

        });
    </script>
</head>
<body>
    <div style="text-align:center;"><span>请输入请求地址，测试是否已经支持跨域</span><br/>
    请求地址：<input id="url" type="text" value="" style="width:400px;margin-top:20px;"/>
    <input id="btn" type="button" value="点击测试" />
    </div>
</body>
</html>
